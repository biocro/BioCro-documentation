<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • BioCro</title><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BioCro</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../about_pkgdown_documentation.html">About</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>GENERAL BIOCRO USAGE</h6></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/BioCro.html">Getting Started with BioCro (HTML)</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/workshop_I.pdf">Workshop I (PDF)</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/a_practical_guide_to_biocro.pdf">A Practical Guide to BioCro (PDF)</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/a_practical_guide_to_biocro.R">    [R code]</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/quantitative_model_comparison.pdf">Quantitative Comparison Between Two Photosynthesis Models (PDF)</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/quantitative_model_comparison.R">    [R code]</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/BioCro-II_Paper--Section-1.1-example.html">BioCro II Paper: Section 1.1 Example (HTML)</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/dynamical_systems.pdf">BioCro as a Dynamical System</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/an_introduction_to_biocro.pdf">An Introduction to BioCro for Those Who Want to Add Models (PDF)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>CROP GROWTH MODELING TOPICS</h6></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/web_only/thick_layer_absorption.html">Light Absorption by a Thick Layer (HTML)</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/ball_berry_model.html">Using the Ball-Berry Model (HTML)</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/canopy_photosynthesis.html">Multi-layer Canopy Photosynthesis Models (HTML)</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/energy_balance.html">Energy Balance, Leaf Temperature, and Transpiration (HTML)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../../bookdown/index.html">Developer's Manual</a></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-c-library" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">C++ Library</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-c-library"><li><a class="dropdown-item" href="../../doxygen/doxygen_docs_complete/index.html">Complete Doxygen Documentation</a></li>
    <li><a class="dropdown-item" href="../../doxygen/doxygen_docs_framework/index.html">Framework Documentation</a></li>
    <li><a class="dropdown-item" href="../../doxygen/doxygen_docs_modules/index.html">BioCro Module Documentation</a></li>
    <li><a class="dropdown-item" href="../../doxygen/doxygen_docs_modules_public_members_only/index.html">BioCro Module Documentation (public members only)</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/biocro/biocro/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/biocro/biocro/blob/v3.3.0/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.3.0" id="changes-in-biocro-version-330">Changes in BioCro version 3.3.0<a class="anchor" aria-label="anchor" href="#changes-in-biocro-version-330"></a></h2><p class="text-muted">CRAN release: 2025-12-14</p>
<div class="section level3">
<h3 id="minor-user-facing-changes-3-3-0">Minor User-Facing Changes<a class="anchor" aria-label="anchor" href="#minor-user-facing-changes-3-3-0"></a></h3>
<ul><li>
<p>Increased the minimum supported R version to 4.1.0.</p>
<ul><li><p>This was necessary because the C++ standard was switched from C++11 to C++17, as required by CRAN.</p></li>
<li><p>The version of boost bundled with BioCro (1.71.0) was also not compatible with C++17, requiring an update to a new version (1.89.0).</p></li>
</ul></li>
<li>
<p>New multidimensional and 1D root finders written in C++ have been added to <code>src/math/roots/</code>. These are intended to support models requiring numerical solutions to sets of simultaneous equations, and they will eventually be moved to the <code>biocro/framework</code> repository.</p>
<ul><li><p>For multidimensional root finders, see <code>src/math/roots/multidim/zeros.h</code> for example usage. Currently, only one method is available: Broyden’s method.</p></li>
<li><p>For 1D root finders, see <code>src/math/roots/onedim/roots.h</code> for example usage and a list of available methods.</p></li>
<li>
<p>These new finders are now used in several places:</p>
<ul><li><p>For Ci calculations, replaced the original fixed-point iteration method with the new 1D Dekker root finder. Fixed-point iteration is known to be unstable in these calculations; see Sun et al. (2012) “A numerical issue in calculating the coupled carbon and water fluxes in a climate model.” <em>Journal of Geophysical Research</em> <a href="https://dx.doi.org/10.1029/2012JD018059" class="external-link uri">https://dx.doi.org/10.1029/2012JD018059</a>.</p></li>
<li><p>For leaf temperature calculations, replaced the original fixed-point iteration method with the new 1D Dekker root finder.</p></li>
<li><p>For the Nikolov leaf boundary layer conductance model, replaced the original fixed-point iteration method with the new 1D Dekker root finder.</p></li>
</ul></li>
</ul></li>
<li><p>Added a new module which computes day length from solar position: <code>BioCro:daylength_calculator</code>.</p></li>
<li><p>Added a new model for leaf boundary layer conductance (from Campbell &amp; Norman 1998). This model is now used in place of the Nikolov model for energy balance calculations, since it can be solved more easily, and does not have multiple solutions.</p></li>
<li><p>Changed how growth respiration is calculated (so the rate of growth respiration is zero whenever the base rate of carbon available for growth is negative) and made sure it is calculated consistently across different modules.</p></li>
<li>
<p>Renamed several quantities to make their meanings more clear:</p>
<ul><li><p><code>mrc1</code> has been replaced by <code>grc_leaf</code> and <code>grc_stem</code> to better indicate that this is a growth respiration coefficient that was applied to two different tissues.</p></li>
<li><p><code>mrc2</code> has been replaced by <code>grc_root</code> and <code>grc_rhizome</code> for similar reasons.</p></li>
<li><p><code>mrc_root</code> has been split into <code>mrc_root</code> and <code>mrc_rhizome</code> instead of using one coefficient for both.</p></li>
<li><p><code>mrc_grain</code> has been split into <code>mrc_grain</code> and <code>mrc_shell</code> instead of using one coefficient for both.</p></li>
<li><p>Molar fluxes (with units of micromol / m^2 / s) are now distinguished from mass fluxes (with units of Mg / ha / hr) when necessary by replacing <code>_rate</code> with <code>_molar_flux</code> in the quantity name. For example, <code>canopy_assimilation_molar_flux</code> is a molar flux and <code>canopy_assimilation_rate</code> is a mass flux. Previously the molar fluxes had a suffix of <code>_CO2</code>, so this necessitated renaming two quantities: <code>canopy_assimilation_rate_CO2</code> and <code>canopy_photorespiration_rate_CO2</code>.</p></li>
<li><p><code>GrossAssim_CO2</code> was renamed to <code>canopy_gross_assimilation_molar_flux</code> for consistency with other canopy-level molar flux outputs such as <code>canopy_assimilation_molar_flux</code>.</p></li>
<li><p><code>Rd</code> was renamed to <code>RL</code> and its definition was updated to “the rate of non-photorespiratory CO2 release in the light” when necessary, following <a href="https://doi.org/10.1093/plphys/kiab076" class="external-link uri">https://doi.org/10.1093/plphys/kiab076</a> and <a href="https://doi.org/10.1111/pce.14153" class="external-link uri">https://doi.org/10.1111/pce.14153</a>. This avoid the ambiguity of using a subscript <code>d</code> (which can refer to “day” or “dark” in different contexts) and it reflects an updated understanding of the metabolic origin of this term (it is not exclusively, or even primarily, due to mitochondrial respiration).</p></li>
<li><p>Several quantities representing a value at 25 degrees C were renamed to better reflect this: <code>jmax</code> -&gt; <code>Jmax_at_25</code>, <code>Rd</code> -&gt; <code>RL_at_25</code>, <code>tpu_rate_max</code> -&gt; <code>Tp_at_25</code>, <code>vmax1</code> -&gt; <code>Vcmax_at_25</code>, <code>vmax</code> -&gt; <code>Vcmax_at_25</code>.</p></li>
</ul></li>
<li><p>The <code>BioCro:parameter_calculator</code> module no longer recalculates <code>Vcmax_at_25</code>.</p></li>
<li><p>The rate of non-photorespiratory CO2 release in the light (<code>RL</code> or <code>canopy_non_photorespiratory_CO2_release</code>) is now included in the outputs of photosynthesis modules, including at the canopy level.</p></li>
<li><p>The rate of whole-plant growth respiration is now included in the outputs of the canopy photosynthesis modules, including the C4 canopy, where whole-plant growth respiration had not been previously calculated.</p></li>
<li><p>The <code>BioCro:maintenance_respiration</code> module was split into two modules (a differential module called <code>BioCro:maintenance_respiration</code> and a direct module called <code>BioCro:maintenance_respiration_calculator</code>) to make maintenance respiration rates available as outputs.</p></li>
<li>
<p>Several changes were made to the partitioning growth calculator modules:</p>
<ul><li><p>Now there are only two such modules: <code>BioCro:partitioning_growth_calculator</code> and <code>BioCro:partitioning_growth_calculator_leaf_costs</code>.</p></li>
<li><p>The partitioning growth calculator modules now include growth respiration rates in their outputs.</p></li>
<li><p>They have also been standardized so they apply growth respiration to all tissues, and they both incorporate reductions in leaf growth rate due to water stress.</p></li>
</ul></li>
<li><p>The <code>BioCro:partitioning_coefficient_logistic</code> module can now calculate the rhizome partitioning coefficient using the logistic model.</p></li>
<li><p>Two new modules were added for calculating cumulative flows of CO2 and water: <code>BioCro:cumulative_carbon_dynamics</code> and <code>BioCro:cumulative_water_dynamics</code>.</p></li>
<li><p>A new module was added for calculating the total amounts of carbon used for growth and maintenance respiration: <code>BioCro:total_growth_and_maintenance_respiration</code>.</p></li>
<li><p>Simplified the radiation use efficiency (RUE) model such that net CO2 assimilation is directly proportional to the incident quantum flux of photons.</p></li>
<li><p>Altered <code>test_module</code> (and hence <code>test_module_library</code>) so that new module outputs produce a warning but don’t cause an error on their own.</p></li>
<li><p>Altered <code>evaluate_module</code>, <code>partial_evaluate_module</code>, and <code>module_response_curve</code> so that by default, module errors do not prevent response curve calculations from completing. The original behavior of these functions can be reproduced by setting <code>stop_on_exception</code> to <code>TRUE</code> when calling them.</p></li>
<li><p>Following changes to the behavior of some modules, the soybean model was re-parameterized. The parameterization script is now included in the BioCro repository and package. See the help file for <code>soybean</code> for complete details.</p></li>
<li><p><code>catm_data</code> was updated to include the global average atmospheric CO2 concentration in 2024.</p></li>
<li><p>Added a new workshop vignette, and removed an outdated vignette about the FvCB model.</p></li>
<li><p>Links to the main BioCro documentation web site were changed from <code>https://biocro.github.io</code> to <code>https://biocro.org</code></p></li>
</ul></div>
<div class="section level3">
<h3 id="internal-changes-3-3-0">Internal changes<a class="anchor" aria-label="anchor" href="#internal-changes-3-3-0"></a></h3>
<ul><li>Renamed the <code>resp()</code> function to <code>growth_resp_Q10()</code> to better indicate its purpose, and moved it to a respiration header file. The new header file (<code>respiration.h</code>) also includes a new maintenance respiration function (<code>maintenance_respiration_Q10()</code>) and a simpler growth respiration function that does not apply a Q10 response (<code>growth_resp()</code>).</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-3-3-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-3-3-0"></a></h3>
<ul><li><p>Fixed a an issue where setting <code>adaptive_max_steps</code> to <code>NA</code> in R would cause <code>run_biocro</code> to fail at the first time point.</p></li>
<li><p>Fixed a typo in the calculation of relative humidity just above the canopy (<code>RH_canopy</code>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.2.0" id="changes-in-biocro-version-320">Changes in BioCro version 3.2.0<a class="anchor" aria-label="anchor" href="#changes-in-biocro-version-320"></a></h2><p class="text-muted">CRAN release: 2025-03-07</p>
<div class="section level3">
<h3 id="minor-user-facing-changes-3-2-0">Minor User-Facing Changes<a class="anchor" aria-label="anchor" href="#minor-user-facing-changes-3-2-0"></a></h3>
<ul><li><p>Added maintenance respiration for each organ in a new module called <code>BioCro:maintenance_respiration</code>. Maintenance respiration is modelled by removing a fraction of dry biomass. The fraction removed is determined by an organ-specific “maintenance respiration coefficient” (such as <code>mrc_leaf</code>) and follows a Q10 temperature response. This differs from the existing growth respiration that is applied to the stem and root, and from a separate canopy growth respiration that can be used to rescale the canopy assimilation rate.</p></li>
<li><p>Separated the specific leaf area (SLA) calculations from the <code>BioCro:parameter_calculator</code> module to enable alternate approaches to SLA. The original method is now available as the <code>BioCro:sla_linear</code> module, and a new logistic method has been added: <code>BioCro:sla_logistic</code>. The stored crop model definitions were updated to use the linear SLA module.</p></li>
<li><p>Provided a new direct module for determining development index from thermal time: <code>BioCro:development_index_from_thermal_time</code>. This module is an alternative to the <code>BioCro:thermal_time_development_rate_calculator</code> differential module.</p></li>
<li>
<p>C3 temperature response parameters are no longer hard-coded into <code>c3photoC()</code>:</p>
<ul><li><p>There are now specialized structs for the temperature response parameters (<code>c3_temperature_response_parameters</code>) and the temperature-dependent values of key photosynthetic parameters (<code>c3_param_at_tleaf</code>).</p></li>
<li><p>There is also a dedicated function for calculating temperature-dependent parameter values: <code>c3_temperature_response()</code>.</p></li>
<li><p>The temperature response parameters are now inputs to several modules: <code>BioCro:c3_assimilation</code>, <code>BioCro:c3_canopy</code>, <code>BioCro:c3_leaf_photosynthesis</code>,</p></li>
<li><p>There is also a dedicated module for calculating values of C3 parameters at leaf temperature: <code>BioCro:c3_parameters</code>.</p></li>
<li><p>The <code>theta</code> parameter was renamed to <code>theta_0</code> for better consistency with the <code>polynomial_response()</code> function input argument names.</p></li>
</ul></li>
<li>
<p>Added a new vignette explaining key features of BioCro’s multilayer canopy model, and made several changes to <code>sunML()</code> and related functions to ensure that the code matches the model description in the vignette:</p>
<ul><li><p>Stopped calculating and using the “average” incident PPFD and absorbed shortwave radiation for leaves in the canopy.</p></li>
<li><p>Stopped using the “thick layer absorption” equation for determining the absorbed shortwave radiation within the canopy, replacing it with the thin layer absorption equation.</p></li>
<li><p>Used a simpler equation for calculating the fraction of sunlit leaves.</p></li>
<li><p>Used the same absorptivity value for direct and diffuse light.</p></li>
<li><p>Used separate leaf transmittance and reflectance values for PAR and NIR radiation within the canopy, rather than always assuming that light in the two bands are absorbed and scattered equally; in general, this caused a reduction in the absorbed shortwave energy for all leaves.</p></li>
<li><p>Started calculating absorptivity as <code>1 - R - T</code>, where <code>R</code> and <code>T</code> are the leaf reflectance and transmittance coefficients, respectively. This ensures that the constraint <code>A + R + T = 1</code> is always satisfied.</p></li>
</ul></li>
<li>
<p>Made several changes to BioCro’s time handling:</p>
<ul><li><p>The <code>time</code> variable is now required to be sequential and evenly spaced, where the time interval must be equal to <code>timestep</code>. A consequence is that <code>time</code> and <code>timestep</code> must have the same units.</p></li>
<li><p>With this change, it was necessary to change the definition of <code>time</code> used with the crop models. Now it is expected to be expressed as the (fractional) number of hours since midnight on January 1, rather than a fractional day of year.</p></li>
<li><p>There is a new module for calculating <code>doy</code> and <code>hour</code> from <code>time</code>, called <code>BioCro:format_time</code>. This module ensures that <code>doy</code> always takes integer values in the output from <code>run_biocro</code>.</p></li>
<li><p>In most cases, old scripts calling <code>run_biocro</code> will continue to function following these changes because <code>time</code> will be correctly computed from <code>doy</code> and <code>hour</code>, and <code>BioCro:format_time</code> will be automatically added to module lists.</p></li>
<li><p>The redefinition of <code>time</code> from days to hours may require changes to plotting commands or other operations using <code>time</code>. In most cases, instances of <code>time</code> in old scripts can be replaced by <code>fractional_doy</code>, which is equivalent to the definition of <code>time</code> used in previous versions of BioCro.</p></li>
</ul></li>
<li><p>Added a new function for generating C++ header files for new module classes: <code>module_write</code>.</p></li>
<li><p>Added several functions to help with model regression tests: <code>compare_model_output</code>, <code>model_test_case</code>, <code>run_model_test_cases</code>, and <code>update_stored_model_results</code>. Previously, these were part of <code>tests/testthat/crop_model_testing_helper_functions.R</code>.</p></li>
<li>
<p>The conversion of CO2 assimilation to biomass is no longer hard coded into the photosynthesis functions and modules, such as <code>c3CanAC()</code>, <code>CanAC()</code>, and <code>BioCro:ten_layer_multilayer_canopy_integrator</code>.</p>
<ul><li><p>These functions and modules now produce canopy assimilation rates as molecular fluxes (with units of micromol CO2 / m^2 / s).</p></li>
<li><p>A new module called <code>BioCro:carbon_assimilation_to_biomass</code> now performs the conversion to rates of dry biomass acculumation (with units of Mg / ha / hr). A new parameter <code>dry_biomass_per_carbon</code> controls the conversion.</p></li>
<li><p>All affected models have the same behavior as before if the new module is used with <code>dry_biomass_per_carbon</code> set to 30.026 g / mol.</p></li>
</ul></li>
<li><p>The <code>soybean</code> model was re-parameterized following changes to module behavior.</p></li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-3-2-0">Other Changes<a class="anchor" aria-label="anchor" href="#other-changes-3-2-0"></a></h3>
<ul><li><p>Consolidated all temperature response functions into a single header file (<code>src/module_library/temperature_response_functions.h</code>) that now includes <code>arrhenius_exponential()</code>, <code>Q10_temperature_response()</code>, <code>johnson_eyring_williams_response()</code>, and <code>polynomial_response()</code>.</p></li>
<li><p>The developer documentation was updated to include a section about pull requests.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-3-2-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-3-2-0"></a></h3>
<ul><li><p>Fixed incorrect <code>year</code> column values in the weather data.</p></li>
<li><p>Fixed a mistake where the CMI weather data for 2023 was a copy of the 2022 data.</p></li>
<li><p>The <code>ode_solver</code> input argument of <code>run_biocro</code> is now checked to ensure the essential list elements are provided.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.1.3" id="changes-in-biocro-version-313">Changes in BioCro Version 3.1.3<a class="anchor" aria-label="anchor" href="#changes-in-biocro-version-313"></a></h2><p class="text-muted">CRAN release: 2024-04-30</p>
<ul><li><p>This is the first version of BioCro to be accepted by CRAN! Most of the changes since version 3.1.0 were needed to comply with CRAN policies and requirements.</p></li>
<li>
<p>Several changes have been made to reduce the package size from over 20 MB to less than 5 MB:</p>
<ul><li><p>Crop model regression tests only store 1 of every 24 rows (one time point from each day).</p></li>
<li>
<p>The stored weather data has been rounded to 3 or fewer significant digits:</p>
<ul><li><p>The <code>solar</code> values have been rounded to the nearest integer.</p></li>
<li><p>The <code>rh</code> values have been rounded to 2 significant digits.</p></li>
</ul></li>
<li><p>The stored crop model regression test data has been rounded to 5 significant digits.</p></li>
<li><p>All previously-existing vignettes were converted to “web only,” meaning they will be available through the pkgdown website but not included with the package itself.</p></li>
<li><p>A new vignette has been added (<code>BioCro.Rmd</code>) that simply redirects readers to the documentation website.</p></li>
</ul></li>
<li><p>Moved the included boost libraries from <code>inc</code> to <code>src/inc</code> since CRAN will not allow a nonstandard top-level directory. Some paths were shortened during this move. The submodule repository was also renamed from <code>biocro/boost</code> to <code>biocro/inc</code>.</p></li>
<li><p>Added the Boost organization to the authors as a copyright holder to comply with CRAN policies.</p></li>
<li><p>Addressed a <code>missing-field-initializers</code> warning from the compiler by explicitly setting <code>iterations</code> to 0 in the output from <code>rue_leaf_photosynthesis</code>.</p></li>
<li><p>Addressed a mistake in <code>thermal_time_and_frost_senescence.h</code> where the leaf death rate due to frost had been unintentionally set to 0 in all conditions. This mistake was caught by a compiler that reported a “ignoring return value of function declared with ‘nodiscard’ attribute” warning.</p></li>
<li>
<p>Changed the minimum version of macOS checked by the R-CMD-check from 3.6.0 to 4.2.0.</p>
<ul><li><p>CRAN now only provides R versions 4.1.0 and above for Mac.</p></li>
<li><p>The <code>deSolve</code> package cannot be built on Mac for R versions below 4.2.0.</p></li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.1.2" id="changes-in-biocro-version-312">Changes in BioCro Version 3.1.2<a class="anchor" aria-label="anchor" href="#changes-in-biocro-version-312"></a></h2>
<ul><li>Variable-length arrays were eliminated from the module library code and replaced with std::vector.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.1.1" id="changes-in-biocro-version-311">Changes in BioCro Version 3.1.1<a class="anchor" aria-label="anchor" href="#changes-in-biocro-version-311"></a></h2>
<ul><li>The package date in its DESCRIPTION file was updated to meet CRAN submission requirements (must be less than one month old).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.1.0" id="changes-in-biocro-version-310">Changes in BioCro Version 3.1.0<a class="anchor" aria-label="anchor" href="#changes-in-biocro-version-310"></a></h2>
<div class="section level3">
<h3 id="minor-user-facing-changes-3-1-0">Minor User-Facing Changes<a class="anchor" aria-label="anchor" href="#minor-user-facing-changes-3-1-0"></a></h3>
<ul><li><p>Another bug was corrected in <code>src/module_library/c3photoC.cpp</code>: The photorespiration value <code>Rp</code> is now calculated using the value of <code>Ci</code> from the current loop iteration (rather than the previous loop iteration).</p></li>
<li><p>Modified some testing-related functions so that warnings due to mismatched framework versions do not trigger test failures: the <code>tryCatch</code> call in <code>test_module</code> now only catches errors (not warnings) when evaluating the module, and <code>test_plant_model</code> (in <code>crop_model_testing_helper_functions.R</code>) now uses <code>expect_no_error</code> instead of <code>expect_silent</code>.</p></li>
<li><p>Changed the energy_par_content constant to 0.219. This is a conversion rate from photon flux density (in micromoles per square meter per second) to energy flux density (in joules per square meter per second or watts per square meter) for photosynthetically active radiation (PAR). It equals 1/4.57, 4.57 being a commonly used constant to convert PAR in W m^-2 to micromol m^-2 s^-1. Users should take care to ensure that if processing of radiation data is required to prepare it for use with BioCro, the same conversion factor is used. See more details in Plant Growth Chamber Handbook. CHAPTER 1 – RADIATION– John C. Sager and J. Craig McFarlane. Table 2, Pg 3 (<a href="https://www.controlledenvironments.org/wp-content/uploads/sites/6/2017/06/Ch01.pdf" class="external-link uri">https://www.controlledenvironments.org/wp-content/uploads/sites/6/2017/06/Ch01.pdf</a>)</p></li>
<li><p>The C++ framework has been updated to v1.1.3. Since the framework is included as a git submodule, it will be necessary to use the <code>--recurse-submodule</code> flag when using <code>git pull</code>, <code>git checkout</code>, or <code>git switch</code> to update a local copy of the BioCro repository, or to move to or from this branch.</p></li>
<li><p>Replaced the <code>inc/boost</code> directory with a submodule pointing to the new <code>biocro/boost</code> repository.</p></li>
<li><p>The (unexported) <code>lightME</code> function has been removed from the R package, since its functionality can be reproduced using the <code>BioCro:solar_position_michalsky</code> and <code>BioCro:shortwave_atmospheric_scattering</code> modules.</p></li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-3-1-0">Other Changes<a class="anchor" aria-label="anchor" href="#other-changes-3-1-0"></a></h3>
<ul><li><p>All instances of <code>fabs</code> or unqualified <code>abs</code> have been replaced by <code>std::abs</code>. The use of unqualified <code>abs</code> in <code>src/module_library/c3photoC.cpp</code> had been causing test failures when running BioCro on Windows using R version 3.6.0.</p></li>
<li><p>This version adds a description of the BioCro git branching model to <code>contribution_guidelines.Rmd</code> and clarifies the process of updating <code>NEWS.md</code>.</p></li>
<li>
<p>The R-CMD-check workflow has been changed in the following ways:</p>
<ul><li>
<p>When the check workflow is run manually, there are two new input options:</p>
<ul><li><p>The user can now choose whether or not to run R CMD check with the –as-cran option. Formerly, this was always used.</p></li>
<li><p>The user can choose whether and when to throw an error on R CMD check failures. Formerly, an error was thrown whenever the R CMD check failure was either “warning” or “error”.</p></li>
</ul></li>
<li><p>Output that was formerly shown only on manual runs when the “debug” checkbox was selected is now always shown. The “debug” option has been changed to “dry-run”, which results in the debug output being shown but the actual check, and those set-up steps needed only to carry out the check, are skipped.</p></li>
<li><p>The debug output steps are grouped together when possible, and the output is shown earlier on in the workflow.</p></li>
<li><p>The R-CMD-check workflow has been modified to work around a problem with testing R version 3.6.0 on Windows. And for all platforms, we now specify the tested minimum R version as 3.6.0 rather than simply 3.6 in order to ensure that we are actually testing the minimum required R version specified in the DESCRIPTION file, rather than some later 3.6.x version such as version 3.6.3.</p></li>
</ul></li>
<li><p>Modified the R-CMD-check workflow so that the manual is not checked when the workflow runs automatically. This has also been made the default when the workflow is run manually.</p></li>
<li><p>GitHub workflows and actions in the repository have been updated to use the latest versions of all GitHub and 3rd-party actions.</p></li>
<li>
<p>Updates related to changing the GitHub hosting organization from “ebimodeling” to “biocro”:</p>
<p>Most references to the ebimodeling GitHub organization have been removed; references to ebimodeling/biocro have been updated to point to biocro/biocro instead. Most of these occurred in various places in the documentation. Most links to the online documentation have been replaced with links to <a href="https://biocro.org" class="external-link uri">https://biocro.org</a>, with (in some cases) instructions on how to navigate to the particular section of the documentation of interest. This decreases dependence on the precise layout of the online documentation. Some other changes and clarifications to the documentation have been made as well.</p>
</li>
<li><p>Addressed some <code>format-security</code> compiler warnings related to calling <code>Rf_error</code> and <code>Rprintf</code> without a format specifier; a format specifier of <code>"%s"</code> should always be used when printing the value of a string variable.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.0.2" id="changes-in-biocro-version-302">Changes in BioCro Version 3.0.2<a class="anchor" aria-label="anchor" href="#changes-in-biocro-version-302"></a></h2>
<div class="section level3">
<h3 id="minor-changes-3-0-2">Minor Changes<a class="anchor" aria-label="anchor" href="#minor-changes-3-0-2"></a></h3>
<ul><li>This version adds several missing references to the main README.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.0.1" id="changes-in-biocro-version-301">Changes in BioCro Version 3.0.1<a class="anchor" aria-label="anchor" href="#changes-in-biocro-version-301"></a></h2>
<div class="section level3">
<h3 id="minor-changes-3-0-1">Minor Changes<a class="anchor" aria-label="anchor" href="#minor-changes-3-0-1"></a></h3>
<ul><li>This version pertains only to the GitHub documentation workflow. It changes the publication location to the <code>biocro/BioCro-documentation</code> repository, and it changes the triggers of the workflow so that automatic publication happens when a new release is published. Additionally, a symlink is created to link the URL <a href="https://biocro.org/BioCro-documentation/latest/pkgdown/" class="external-link uri">https://biocro.org/BioCro-documentation/latest/pkgdown/</a> to <a href="https://biocro.org/BioCro-documentation/" class="external-link uri">https://biocro.org/BioCro-documentation/</a><tag name>/pkgdown/, where <tag name> is the tag name for the new release.</tag></tag></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.0.0" id="changes-in-biocro-version-300">Changes in BioCro Version 3.0.0<a class="anchor" aria-label="anchor" href="#changes-in-biocro-version-300"></a></h2>
<div class="section level3">
<h3 id="major-changes-3-0-0">Major Changes<a class="anchor" aria-label="anchor" href="#major-changes-3-0-0"></a></h3>
<ul><li><p>This version introduces the concept of distinct module libraries, allowing users to develop modules in private and to create collections of related modules. There is an associated syntax change, where modules must now be specified using <em>fully-qualified names</em> that include a module library name and the local name of a module within that library; for example, the module that was previously known as <code>thermal_time_linear</code> must now be referred to as <code>BioCro:thermal_time_linear</code>.</p></li>
<li><p>Any R package representing a BioCro module library must now have four non-exported functions related to accessing its modules: <code>get_all_modules</code>, <code>get_all_quantities</code>, <code>module_creators</code>, and <code>framework_version</code>. When a fully-qualified module name such as <code>library_name:local_module_name</code> is passed to a function such as <code>module_info</code>, an internal call to <code>library_name:::module_creators(module_name)</code> will be made to retrieve a pointer to a module. Hence, <code>library_name</code> must be the same as the module library package name. This is a required part of a method for passing C objects from a module library to the core BioCro framework via R; the full details are not discussed here.</p></li>
<li><p>The code in the <code>src</code> directory has been reorganized to reflect the division between framework code, module code, and “R-to-C” code discussed in the manuscript; now, <code>src/framework</code> contains the core C++ code, <code>src/module_library</code> contains the module code, and the “R-to-C” code can be found directly in <code>src</code>.</p></li>
<li><p>The C++ framework code in <code>src/framework</code> has been moved to a separate repository and licensed under the GNU LGPL; it is included in the BioCro R package repository as a Git submodule. This allows us to use a permissive license for the BioCro R package while still protecting the code that assembles and solves models. Associated with this change, the BioCro R package is now licensed under the MIT license. See <code>LICENSE.note</code> for details.</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-changes-3-0-0">Minor Changes<a class="anchor" aria-label="anchor" href="#minor-changes-3-0-0"></a></h3>
<ul><li><p>The <code>soil_type_selector</code> module has been removed and replaced with a data object called <code>soil_parameters</code>. For crop models that previously set the <code>soil_type_indicator</code> to <code>6</code> to choose the soil parameter values, this parameter has been replaced with the values from <code>soil_parameters$clay_loam</code>.</p></li>
<li><p>Crop model definitions are now stored as single lists rather than as multiple objects; for example, <code>soybean_parameters</code> and <code>soybean_initial_values</code> are now stored as two elements of the <code>soybean</code> list: <code>soybean$parameters</code> and <code>soybean$initial_values</code>.</p></li>
<li><p>The function returned by <code>partial_run_biocro</code> can now properly respond to vectors and lists of named elements.</p></li>
<li><p>Module testing functions have been added to the package namespace.</p></li>
<li><p>Many small improvements have been made to the documentation and the module code in <code>src/module_library</code>; these changes are too numerous to list here.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-3-0-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-3-0-0"></a></h3>
<ul><li><p>The elements of the <code>arg_names</code> input to <code>partial_run_biocro</code> can now be in any order; previously, they were required to be supplied in the same order as the appear in the other inputs to <code>partial_run_biocro</code>, for example, the names of any initial values were required to come before the names of any parameters. If the arguments were supplied in the wrong order, then the inputs to the function returned by <code>partial_run_biocro</code> would be interpreted in the wrong order.</p></li>
<li><p>A bug that sometimes caused the last time point of a simulation to contain NaN for all quantities has been fixed; this was related to an out-of-bounds error when accessing vector elements in the C++ function <code>dynamical_system::update_drivers</code>.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.0" id="changes-in-biocro-version-200">Changes in BioCro Version 2.0.0<a class="anchor" aria-label="anchor" href="#changes-in-biocro-version-200"></a></h2>
<div class="section level3">
<h3 id="major-changes-2-0-0">Major Changes<a class="anchor" aria-label="anchor" href="#major-changes-2-0-0"></a></h3>
<ul><li>
<p>This version is a major update to the design of BioCro. In this version, subsets of a model are called <em>modules</em>. The design attempts to meet the following goals:</p>
<ul><li><p>Make it easier to reuse modules between species, such as the C3 photosynthesis modules.</p></li>
<li><p>Make it easier to swap related modules for comparison, for example, comparing the Farquhar-von-Caemmerer-Berry model to a radiation use efficiency model.</p></li>
<li><p>Simplify parameter optimization and sensitivity analysis by providing an interface readily useable by common optimizers and similar functions.</p></li>
</ul></li>
<li>
<p>More details can be found in the peer-reviewed publication in <em>in silico</em> Plants <a href="https://doi.org/10.1093/insilicoplants/diac003" class="external-link">Lochocki et al., 2022</a> and in the vignettes included with the package:</p>
<ul><li><p><em>A Practical Guide to BioCro</em></p></li>
<li><p><em>Quantitative Comparison Between Two Photosynthesis Models</em></p></li>
<li><p><em>An Introduction to BioCro for Those Who Want to Add Models</em></p></li>
</ul><p>PDF versions of these vignettes corresponding to the latest version of BioCro can be obtained online from the <em>Articles</em> menu at the <a href="https://biocro.org" class="external-link">BioCro documentation website</a>.</p>
</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.951" id="biocro-version-0951">BioCro Version 0.951<a class="anchor" aria-label="anchor" href="#biocro-version-0951"></a></h2>
<ul><li>This is the last release of the original version of BioCro, which was first described in <a href="https://doi.org/10.1111/j.1757-1707.2009.01019.x" class="external-link">Miguez et al., 2009</a> and updated over the years to add more crop models and R functions. A full change log for this version and previous versions is not available in this document.</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Justin M. McGrath, Edward B. Lochocki, Yufeng He, Scott W. Oswald, Scott Rohde, Deepak Jaiswal, Megan L. Matthews, Fernando E. Miguez, Stephen P. Long.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

